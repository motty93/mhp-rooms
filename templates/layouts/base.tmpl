{{ define "base" }}
  <!doctype html>
  <html lang="ja">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>{{ .Title }} - MonHub</title>
      <meta
        name="description"
        content="PSPゲームのアドホックパーティを簡単に作成・参加できるサービス。モンハンポータブルシリーズでオンライン対戦を楽しもう。"
      />
      <meta
        name="keywords"
        content="MonHub,モンハブ,PSP,アドホック,パーティ,モンハン,モンスターハンター,ポータブル,オンライン,対戦,協力プレイ"
      />
      <meta name="author" content="MonHub" />
      <meta property="og:title" content="{{ .Title }} - MonHub" />
      <meta
        property="og:description"
        content="PSPゲームのアドホックパーティを簡単に作成・参加できるサービス"
      />
      <meta property="og:type" content="website" />
      <meta property="og:site_name" content="MonHub" />

      <!-- 構造化データ：サイトナビゲーション -->
      <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@graph": [
            {
              "@type": "WebSite",
              "@id": "https://monhub.com/#website",
              "url": "https://monhub.com/",
              "name": "MonHub",
              "description": "PSPゲームのアドホックパーティを簡単に作成・参加できるサービス",
              "inLanguage": "ja"
            },
            {
              "@type": "SiteNavigationElement",
              "@id": "https://monhub.com/#navigation",
              "name": [
                "ホーム",
                "部屋一覧",
                "ログイン",
                "新規登録",
                "お問い合わせ",
                "利用規約",
                "プライバシーポリシー"
              ],
              "url": [
                "https://monhub.com/",
                "https://monhub.com/rooms",
                "https://monhub.com/auth/login",
                "https://monhub.com/auth/register",
                "https://monhub.com/contact",
                "https://monhub.com/terms",
                "https://monhub.com/privacy"
              ]
            }
          ]
        }
      </script>

      <!-- ローカルライブラリ -->
      <script src="/static/js/vendor/htmx.min.js"></script>
      <script src="/static/js/vendor/alpine.min.js" defer></script>

      <!-- Supabase -->
      <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
      <script src="/static/js/supabase.js"></script>
      <script src="/static/js/auth-store.js"></script>
      <script src="/static/js/room-create-store.js"></script>
      <script src="/static/js/htmx-auth.js"></script>

      <script>
        document.addEventListener('DOMContentLoaded', async () => {
          if (typeof window.initializeSupabase === 'function') {
            try {
              await window.initializeSupabase()
              document.dispatchEvent(new CustomEvent('supabase-initialized'))
            } catch (e) {
              console.error('Supabase初期化エラー:', e)
            }
          }
        })
      </script>
      <script>
        document.addEventListener('alpine:init', () => {
          Alpine.store('mobileMenu', {
            open: false,
            toggle() {
              this.open = !this.open
            },
            close() {
              this.open = false
            },
          })
        })
      </script>

      <!-- Tailwind CSSは開発用にCDNを維持 -->
      <script src="https://cdn.tailwindcss.com"></script>
      <link
        rel="icon"
        type="image/x-icon"
        href="/static/images/icons/favicon.ico"
      />
      <link
        rel="icon"
        type="image/x-icon"
        sizes="32x32"
        href="/static/images/icons/favicon-32x32.ico"
      />
      <link
        rel="icon"
        type="image/x-icon"
        sizes="16x16"
        href="/static/images/icons/favicon-16x16.ico"
      />
      <link
        rel="apple-touch-icon"
        sizes="180x180"
        href="/static/images/icons/apple-touch-icon.png"
      />
      <link rel="preconnect" href="https://fonts.googleapis.com" />
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
      <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&display=swap"
        rel="stylesheet"
      />
      <link rel="stylesheet" href="/static/css/style.css" />
      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"
      />

      {{ template "head" . }}
    </head>

    <body class="bg-gray-50 min-h-screen flex flex-col" x-data>
      {{ template "header" . }}


      <!-- モバイルメニュー -->
      <div class="md:hidden">
        <!-- オーバーレイ -->
        <div
          x-show="$store.mobileMenu.open"
          x-cloak
          @click="$store.mobileMenu.close()"
          class="fixed inset-0 bg-black bg-opacity-50 z-[9998]"
          x-transition:enter="transition-opacity ease-out duration-300"
          x-transition:enter-start="opacity-0"
          x-transition:enter-end="opacity-100"
          x-transition:leave="transition-opacity ease-in duration-200"
          x-transition:leave-start="opacity-100"
          x-transition:leave-end="opacity-0"
          style="display: none"
        ></div>

        <!-- モバイルメニューパネル -->
        <div
          x-show="$store.mobileMenu.open"
          x-cloak
          class="fixed top-0 right-0 h-full w-80 bg-white shadow-lg z-[9999] overflow-y-auto"
          x-transition:enter="transition ease-out duration-300"
          x-transition:enter-start="transform translate-x-full"
          x-transition:enter-end="transform translate-x-0"
          x-transition:leave="transition ease-in duration-200"
          x-transition:leave-start="transform translate-x-0"
          x-transition:leave-end="transform translate-x-full"
          style="display: none"
        >
          <!-- メニューヘッダー -->
          <div
            class="flex items-center justify-between p-6 border-b border-gray-200"
          >
            <div class="flex items-center space-x-3">
              <img src="/static/images/icon.webp" alt="MonHub" class="w-8 h-8" />
              <h2 class="text-xl font-bold text-gray-800">MonHub</h2>
            </div>
            <button
              @click="$store.mobileMenu.close()"
              class="text-gray-500 hover:text-gray-700"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                ></path>
              </svg>
            </button>
          </div>

          <!-- メニュー内容 -->
          <div class="p-6">
            <!-- 未認証時のメニュー -->
            <div
              x-show="$store.auth.initialized && !$store.auth.loading && !$store.auth.isAuthenticated"
              style="display: none;"
            >
              <div class="space-y-4">
                <a
                  href="/auth/login"
                  @click="$store.mobileMenu.close()"
                  class="block w-full text-center bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-lg font-medium hover:bg-gray-50 transition-colors"
                >
                  ログイン
                </a>
                <a
                  href="/auth/register"
                  @click="$store.mobileMenu.close()"
                  class="block w-full text-center bg-gray-800 text-white py-3 px-4 rounded-lg font-medium hover:bg-gray-900 transition-colors"
                >
                  新規登録
                </a>
              </div>
              <hr class="my-6 border-gray-200" />
              <div class="space-y-2">
                <a
                  href="/rooms"
                  @click="$store.mobileMenu.close()"
                  class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
                >
                  部屋一覧
                </a>
              </div>
            </div>

            <!-- 認証済み時のメニュー -->
            <div
              x-show="$store.auth.initialized && !$store.auth.loading && $store.auth.isAuthenticated"
              style="display: none;"
            >
              <div class="space-y-2">
                <!-- 参加中の部屋 -->
                <template x-if="$store.auth.currentRoom">
                  <a
                    :href="'/rooms/' + $store.auth.currentRoom.id"
                    @click="$store.mobileMenu.close()"
                    class="block px-4 py-3 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors border-l-4 border-blue-500"
                  >
                    <div class="flex items-center space-x-2">
                      <svg
                        class="w-5 h-5"
                        fill="currentColor"
                        viewBox="0 0 20 20"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                          clip-rule="evenodd"
                        />
                      </svg>
                      <div>
                        <div class="font-medium" x-text="'参加中の部屋'"></div>
                        <div
                          class="text-sm opacity-75"
                          x-text="$store.auth.currentRoom.name"
                        ></div>
                      </div>
                    </div>
                  </a>
                </template>
                <a
                  href="/rooms"
                  @click="$store.mobileMenu.close()"
                  class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
                >
                  部屋一覧
                </a>
                <button
                  @click="$store.roomCreate.open(); $store.mobileMenu.close();"
                  class="block w-full text-left px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
                >
                  部屋作成
                </button>
              </div>
              <hr class="my-6 border-gray-200" />
              <div class="space-y-2">
                <a
                  href="/profile"
                  @click="$store.mobileMenu.close()"
                  class="block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
                >
                  プロフィール
                </a>
              </div>
              <hr class="my-6 border-gray-200" />
              <button
                @click="if(confirm('ログアウトしますか？')) { $store.auth.signOut(); $store.mobileMenu.close(); }"
                class="block w-full text-left px-4 py-3 text-red-600 hover:bg-gray-100 rounded-lg transition-colors"
              >
                ログアウト
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- メインコンテンツエリア -->
      <main class="{{ if .HasHero }}{{ else }}pt-16{{ end }} grow">
        {{ template "page" . }}
      </main>

      {{ template "footer" . }}


      <!-- グローバル部屋作成モーダル -->
      <div
        x-data="{ 
        init() { 
          Alpine.store('roomCreate').init() 
        },
        // Escキー処理
        handleEscape(event) {
          if (event.key === 'Escape') {
            Alpine.store('roomCreate').handleEscape()
          }
        }
      }"
        @keydown.window="handleEscape"
      >
        <!-- 部屋作成モーダル -->
        <div
          x-show="$store.roomCreate.showModal"
          x-cloak
          @keydown.escape="$store.roomCreate.handleEscape"
          class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
        >
          <!-- モーダルコンテンツ -->
          <div
            x-show="$store.roomCreate.showModal"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 scale-95"
            x-transition:enter-end="opacity-100 scale-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100 scale-100"
            x-transition:leave-end="opacity-0 scale-95"
            @click.stop
            class="bg-white rounded-lg shadow-xl w-full max-w-md max-h-screen overflow-y-auto"
          >
            <!-- ヘッダー -->
            <div
              class="flex items-center justify-between p-6 border-b border-gray-200"
            >
              <h2 class="text-xl font-semibold text-gray-900">
                新しい部屋を作る
              </h2>
              <button
                @click="$store.roomCreate.close()"
                class="text-gray-400 hover:text-gray-500 focus:outline-none"
              >
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M6 18L18 6M6 6l12 12"
                  />
                </svg>
              </button>
            </div>

            <!-- フォーム -->
            <form
              @submit.prevent="$store.roomCreate.createRoom()"
              class="p-6 space-y-4"
            >
              <!-- 部屋名 -->
              <div>
                <label
                  for="global-create-room-name"
                  class="block text-sm font-medium text-gray-700 mb-1"
                >
                  部屋名 <span class="text-red-500">*</span>
                </label>
                <input
                  id="global-create-room-name"
                  type="text"
                  x-model="$store.roomCreate.formData.name"
                  maxlength="50"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  :class="{ 'border-red-500': $store.roomCreate.formErrors.name }"
                  placeholder="部屋の名前を入力してください"
                />
                <div class="flex justify-between mt-1">
                  <div
                    x-show="$store.roomCreate.formErrors.name"
                    class="text-red-500 text-sm"
                    x-text="$store.roomCreate.formErrors.name"
                  ></div>
                  <div
                    class="text-gray-500 text-sm"
                    x-text="`${$store.roomCreate.formData.name.length}/50`"
                  ></div>
                </div>
              </div>

              <!-- ゲーム -->
              <div>
                <label
                  for="global-create-game-version"
                  class="block text-sm font-medium text-gray-700 mb-1"
                >
                  ゲーム <span class="text-red-500">*</span>
                </label>
                <select
                  id="global-create-game-version"
                  x-model="$store.roomCreate.formData.gameVersionId"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  :class="{ 'border-red-500': $store.roomCreate.formErrors.gameVersionId }"
                >
                  <option value="">ゲームを選択してください</option>
                  <template
                    x-for="version in $store.roomCreate.gameVersions"
                    :key="version.id"
                  >
                    <option :value="version.id" x-text="version.name"></option>
                  </template>
                </select>
                <div
                  x-show="$store.roomCreate.formErrors.gameVersionId"
                  class="text-red-500 text-sm mt-1"
                  x-text="$store.roomCreate.formErrors.gameVersionId"
                ></div>
              </div>

              <!-- 募集人数 -->
              <div>
                <label
                  for="global-create-max-players"
                  class="block text-sm font-medium text-gray-700 mb-1"
                >
                  募集人数 <span class="text-red-500">*</span>
                </label>
                <select
                  id="global-create-max-players"
                  x-model.number="$store.roomCreate.formData.maxPlayers"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  :class="{ 'border-red-500': $store.roomCreate.formErrors.maxPlayers }"
                >
                  <option value="">募集人数を選択してください</option>
                  <option value="2">2人</option>
                  <option value="3">3人</option>
                  <option value="4">4人</option>
                </select>
                <div
                  x-show="$store.roomCreate.formErrors.maxPlayers"
                  class="text-red-500 text-sm mt-1"
                  x-text="$store.roomCreate.formErrors.maxPlayers"
                ></div>
              </div>

              <!-- パスワード -->
              <div>
                <label
                  for="global-create-password"
                  class="block text-sm font-medium text-gray-700 mb-1"
                >
                  パスワード（任意）
                </label>
                <input
                  id="global-create-password"
                  type="password"
                  x-model="$store.roomCreate.formData.password"
                  maxlength="20"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  :class="{ 'border-red-500': $store.roomCreate.formErrors.password }"
                  placeholder="パスワードを入力してください（任意）"
                />
                <div class="flex justify-between mt-1">
                  <div
                    x-show="$store.roomCreate.formErrors.password"
                    class="text-red-500 text-sm"
                    x-text="$store.roomCreate.formErrors.password"
                  ></div>
                  <div
                    class="text-gray-500 text-sm"
                    x-text="`${$store.roomCreate.formData.password.length}/20`"
                  ></div>
                </div>
              </div>

              <!-- ターゲットモンスター -->
              <div>
                <label
                  for="global-create-target-monster"
                  class="block text-sm font-medium text-gray-700 mb-1"
                >
                  ターゲットモンスター（任意）
                </label>
                <input
                  id="global-create-target-monster"
                  type="text"
                  x-model="$store.roomCreate.formData.targetMonster"
                  maxlength="50"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  :class="{ 'border-red-500': $store.roomCreate.formErrors.targetMonster }"
                  placeholder="討伐予定のモンスターを入力してください（任意）"
                />
                <div class="flex justify-between mt-1">
                  <div
                    x-show="$store.roomCreate.formErrors.targetMonster"
                    class="text-red-500 text-sm"
                    x-text="$store.roomCreate.formErrors.targetMonster"
                  ></div>
                  <div
                    class="text-gray-500 text-sm"
                    x-text="`${$store.roomCreate.formData.targetMonster.length}/50`"
                  ></div>
                </div>
              </div>

              <!-- ランク条件 -->
              <div>
                <label
                  for="global-create-rank-requirement"
                  class="block text-sm font-medium text-gray-700 mb-1"
                >
                  ランク条件（任意）
                </label>
                <input
                  id="global-create-rank-requirement"
                  type="text"
                  x-model="$store.roomCreate.formData.rankRequirement"
                  maxlength="30"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  :class="{ 'border-red-500': $store.roomCreate.formErrors.rankRequirement }"
                  placeholder="参加条件（例：HR6以上、制限なし）を入力してください（任意）"
                />
                <div class="flex justify-between mt-1">
                  <div
                    x-show="$store.roomCreate.formErrors.rankRequirement"
                    class="text-red-500 text-sm"
                    x-text="$store.roomCreate.formErrors.rankRequirement"
                  ></div>
                  <div
                    class="text-gray-500 text-sm"
                    x-text="`${$store.roomCreate.formData.rankRequirement.length}/30`"
                  ></div>
                </div>
              </div>

              <!-- 説明 -->
              <div>
                <label
                  for="global-create-description"
                  class="block text-sm font-medium text-gray-700 mb-1"
                >
                  説明（任意）
                </label>
                <textarea
                  id="global-create-description"
                  x-model="$store.roomCreate.formData.description"
                  rows="3"
                  maxlength="200"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  :class="{ 'border-red-500': $store.roomCreate.formErrors.description }"
                  placeholder="部屋の説明を入力してください（任意）"
                ></textarea>
                <div class="flex justify-between mt-1">
                  <div
                    x-show="$store.roomCreate.formErrors.description"
                    class="text-red-500 text-sm"
                    x-text="$store.roomCreate.formErrors.description"
                  ></div>
                  <div
                    class="text-gray-500 text-sm"
                    x-text="`${$store.roomCreate.formData.description.length}/200`"
                  ></div>
                </div>
              </div>

              <!-- アクションボタン -->
              <div
                class="flex justify-end space-x-3 pt-4 border-t border-gray-200"
              >
                <button
                  type="button"
                  @click="$store.roomCreate.close()"
                  class="px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500"
                >
                  キャンセル
                </button>
                <button
                  type="submit"
                  :disabled="!$store.roomCreate.isValidForm || $store.roomCreate.isSubmitting"
                  :class="{
                    'bg-gray-400 cursor-not-allowed': !$store.roomCreate.isValidForm || $store.roomCreate.isSubmitting,
                    'bg-gray-800 hover:bg-gray-900': $store.roomCreate.isValidForm && !$store.roomCreate.isSubmitting
                  }"
                  class="px-4 py-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"
                >
                  <span x-show="!$store.roomCreate.isSubmitting"
                    >部屋を作る</span
                  >
                  <span
                    x-show="$store.roomCreate.isSubmitting"
                    class="flex items-center"
                  >
                    <svg
                      class="animate-spin -ml-1 mr-3 h-4 w-4 text-white"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <circle
                        class="opacity-25"
                        cx="12"
                        cy="12"
                        r="10"
                        stroke="currentColor"
                        stroke-width="4"
                      ></circle>
                      <path
                        class="opacity-75"
                        fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                      ></path>
                    </svg>
                    作成中...
                  </span>
                </button>
              </div>
            </form>
          </div>

          <!-- バックドロップクリック用の透明エリア -->
          <div
            @click="$store.roomCreate.close()"
            class="absolute inset-0 -z-10"
          ></div>
        </div>

        <!-- ホスト中警告モーダル -->
        <div
          x-show="$store.roomCreate.showHostWarningModal"
          x-cloak
          @click.self="$store.roomCreate.closeHostWarningModal()"
          x-transition:enter="transition ease-out duration-300"
          x-transition:enter-start="opacity-0"
          x-transition:enter-end="opacity-100"
          x-transition:leave="transition ease-in duration-200"
          x-transition:leave-start="opacity-100"
          x-transition:leave-end="opacity-0"
          class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
        >
          <div
            x-show="$store.roomCreate.showHostWarningModal"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="transform scale-95 opacity-0"
            x-transition:enter-end="transform scale-100 opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="transform scale-100 opacity-100"
            x-transition:leave-end="transform scale-95 opacity-0"
            class="bg-white rounded-lg shadow-xl max-w-md w-full"
            @click.stop
          >
            <!-- ヘッダー -->
            <div class="p-6 border-b border-gray-200">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold text-gray-900">
                  新しい部屋を作成できません
                </h3>
                <button
                  @click="$store.roomCreate.closeHostWarningModal()"
                  class="text-gray-400 hover:text-gray-600 transition-colors"
                >
                  <svg
                    class="w-6 h-6"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 18L18 6M6 6l12 12"
                    ></path>
                  </svg>
                </button>
              </div>
            </div>

            <!-- コンテンツ -->
            <div class="p-6">
              <div class="text-gray-600 mb-4">
                <p>
                  あなたは現在「<span
                    class="font-semibold"
                    x-text="$store.roomCreate.currentRoomInfo?.name"
                  ></span
                  >」のホストです。
                </p>
                <p class="mt-2">
                  新しい部屋を作成する前に、この部屋を終了してください。
                </p>
              </div>

              <div class="mb-4">
                <svg
                  class="mx-auto h-12 w-12 text-orange-400"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  />
                </svg>
              </div>
            </div>

            <!-- アクションボタン -->
            <div
              class="px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end space-x-3"
            >
              <button
                @click="$store.roomCreate.closeHostWarningModal()"
                class="px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors"
              >
                閉じる
              </button>
              <a
                :href="'/rooms/' + $store.roomCreate.currentRoomInfo?.id"
                class="px-6 py-2 bg-gray-800 hover:bg-gray-900 text-white font-medium rounded-lg transition-colors"
              >
                ホスト中の部屋へ移動
              </a>
            </div>
          </div>
        </div>

        <!-- ゲスト確認モーダル -->
        <div
          x-show="$store.roomCreate.showGuestConfirmModal"
          x-cloak
          @click.self="$store.roomCreate.closeGuestConfirmModal()"
          x-transition:enter="transition ease-out duration-300"
          x-transition:enter-start="opacity-0"
          x-transition:enter-end="opacity-100"
          x-transition:leave="transition ease-in duration-200"
          x-transition:leave-start="opacity-100"
          x-transition:leave-end="opacity-0"
          class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
        >
          <div
            x-show="$store.roomCreate.showGuestConfirmModal"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="transform scale-95 opacity-0"
            x-transition:enter-end="transform scale-100 opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="transform scale-100 opacity-100"
            x-transition:leave-end="transform scale-95 opacity-0"
            class="bg-white rounded-lg shadow-xl max-w-md w-full"
            @click.stop
          >
            <!-- ヘッダー -->
            <div class="p-6 border-b border-gray-200">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold text-gray-900">
                  他の部屋に参加中です
                </h3>
                <button
                  @click="$store.roomCreate.closeGuestConfirmModal()"
                  class="text-gray-400 hover:text-gray-600 transition-colors"
                >
                  <svg
                    class="w-6 h-6"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 18L18 6M6 6l12 12"
                    ></path>
                  </svg>
                </button>
              </div>
            </div>

            <!-- コンテンツ -->
            <div class="p-6">
              <div class="text-gray-600 mb-4">
                <p>
                  あなたは現在「<span
                    class="font-semibold"
                    x-text="$store.roomCreate.currentRoomInfo?.name"
                  ></span
                  >」に参加中です。
                </p>
                <p class="mt-2">
                  新しい部屋を作成すると、この部屋から退出します。
                </p>
              </div>

              <div class="mb-4">
                <svg
                  class="mx-auto h-12 w-12 text-yellow-400"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  />
                </svg>
              </div>
            </div>

            <!-- アクションボタン -->
            <div
              class="px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end space-x-3"
            >
              <button
                @click="$store.roomCreate.closeGuestConfirmModal()"
                class="px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors"
              >
                キャンセル
              </button>
              <button
                @click="$store.roomCreate.confirmAndOpenModal()"
                class="px-6 py-2 bg-gray-800 hover:bg-gray-900 text-white font-medium rounded-lg transition-colors"
              >
                退出して作成
              </button>
            </div>
          </div>
        </div>
      </div>
    </body>
  </html>
{{ end }}
